# Follow & Follow-Request API Documentation

## Overview

This document describes the follow, unfollow, follow-request, and
request‑management API logic implemented in `FollowResource`.

The system supports: - Normal follow for public accounts. -
Follow‑request workflow for private accounts. - Accepting, declining,
and cancelling requests. - Checking follower/following relationships. -
Viewing own followers, following, incoming requests, and sent requests.

------------------------------------------------------------------------

## Endpoints

### POST /users/follow

Follow a user.\
If the target profile is private, a follow request is created.\
If public, the follow is immediate.

**Request**

    { "userId": <targetUserId> }

**Responses** - 200: Followed or follow request sent. - 400: Already
following, already requested, blocked, or invalid action. - 401: User
does not exist.

------------------------------------------------------------------------

### POST /users/unfollow

Unfollow a user.

**Request**

    { "userId": <targetUserId> }

**Responses** - 200: Unfollowed. - 400: Not following. - 401: User does
not exist.

------------------------------------------------------------------------

### POST /users/check_follow

Check if the current user is following another user.

**Responses** - 200: success true or false. - 400 / 401: User blocked or
invalid.

------------------------------------------------------------------------

### POST /users/check_following

Check if another user is following the current user.

**Responses** - 200: success true or false. - 400 / 401: Blocked or
invalid.

------------------------------------------------------------------------

### GET /users/getFollowers/{userId}

Returns a list of follower user IDs.

------------------------------------------------------------------------

### GET /users/getFollowing/{userId}

Returns a list of following user IDs.

------------------------------------------------------------------------

### GET /users/get_own_following

Returns the authenticated user's following list.

------------------------------------------------------------------------

### GET /users/get_own_followers

Returns the authenticated user's followers.

------------------------------------------------------------------------

## Follow Requests (Private Accounts Only)

Private accounts can receive and act on follow requests.

### GET /users/get_own_requests

Returns incoming follow requests.

Allowed only for private accounts.

------------------------------------------------------------------------

### GET /users/get_sent_requests

Returns follow requests the user has sent to other private accounts.

------------------------------------------------------------------------

### POST /users/check_request_sent

Checks if the current user has sent a follow request to another user.

------------------------------------------------------------------------

### POST /users/accept_request

Accept a follow request.

Allowed only for private account owners.

------------------------------------------------------------------------

### POST /users/decline_request

Decline a follow request.

Allowed only for private account owners.

------------------------------------------------------------------------

### POST /users/cancel_request

Cancel a follow request that the current user previously sent.

Allowed only when the target account is private.

------------------------------------------------------------------------

## Private Account Check

A private account is defined as:

    profile.getVisibility() == ProfileVisibility.PRIVATE

Some endpoints are restricted to private accounts to maintain consistent
follow‑request behavior.

------------------------------------------------------------------------

## Request Body Format

All POST endpoints expecting a target user use:

    {
      "userId": <targetUserId>
    }

------------------------------------------------------------------------

## Error Structure

All responses use:

    {
      "success": true|false,
      "message": "...",
      "data": ...
    }

------------------------------------------------------------------------

## Notes

-   You cannot follow yourself.
-   You cannot bypass blocks.
-   Only private accounts manage incoming follow requests.